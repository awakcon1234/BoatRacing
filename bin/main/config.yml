prefix: "&6[BoatRacing] "
player-actions:
  # Allow non-admin players to perform these actions
  allow-set-boat: true
  allow-set-number: true

# Event opening titles (F1-style)
event:
  registration-npc:
    # NPC d√πng ƒë·ªÉ ng∆∞·ªùi ch∆°i click ƒë·ªÉ ƒëƒÉng k√Ω s·ª± ki·ªán
    # N·∫øu kh√¥ng ƒë·∫∑t world (ƒë·ªÉ tr·ªëng), plugin s·∫Ω d√πng world spawn
    location:
      world: ""
      x: 0.0
      y: 0.0
      z: 0.0
      yaw: 0.0
      pitch: 0.0
    # Skin cho NPC (t∆∞∆°ng t·ª± FancyNpcs): @none | @mirror | <t√™n> | <url> | <t√™n file>
    # ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng d√πng.
    skin: ""
    # B·∫≠t n·∫øu skin d√πng model tay g·∫ßy (Alex / slim)
    skin-slim: false
  podium:
    # Debug toggles (logs to console). Keep these off unless troubleshooting.
    debug: false

  opening-titles:
    # Enable the event opening titles sequence.
    enabled: false

    # Welcome fly-by length (seconds)
    welcome-seconds: 10

    # Delay before the first racer after the intro subtitle (seconds)
    intro-gap-seconds: 4

    # How long each racer is featured (seconds)
    per-racer-seconds: 10

    # Outro title duration (seconds)
    outro-seconds: 6

    # Lobby fly-by camera defaults (used if no explicit points are provided)
    lobby-camera:
      radius: 16.0
      height: 12.0
      points: []

    # Titles/subtitles (MiniMessage-like strings are NOT parsed here; use legacy &-colors in code if needed).
    # Placeholders used by the implementation:
    #   %event_title% %racer_display%
    text:
      welcome_title: "Ch√†o m·ª´ng!"
      welcome_subtitle: "%event_title%"
      racers_intro_title: ""
      racers_intro_subtitle: "ƒê√¢y l√† nh·ªØng g∆∞∆°ng m·∫∑t s·∫Ω tranh t√†i h√¥m nay"
      racer_card_title: ""
      racer_card_subtitle: "%racer_display%"
      outro_title: "B·∫Øt ƒë·∫ßu th√¥i!"
      outro_subtitle: "ƒêang chu·∫©n b·ªã ch·∫∑ng ƒëua ƒë·∫ßu ti√™n‚Ä¶"
racing:
  laps: 3
  registration-seconds: 30

  # Lobby spawn managed by BoatRacing (used for teleporting racers back to the lobby).
  # If disabled, the plugin will fall back to the world's spawn location.
  lobby:
    spawn:
      enabled: false
      world: ""
      x: 0.0
      y: 0.0
      z: 0.0
      yaw: 0.0
      pitch: 0.0

  # Intro cinematic before the start countdown (Mario Kart style fly-by).
  intro:
    enabled: true

    # Number of camera points (keyframes groups) to show.
    points: 4

    # Camera orbit parameters
    radius: 16.0
    height: 12.0

    sound:
      enabled: true

  dashboard:
    # How often to update the in-boat dashboard TextDisplay (in server ticks).
    # Lower = tighter rotation lock, higher = less CPU.
    # Recommended: 1
    update-ticks: 1

    # Number of segments in the dashboard speed bar.
    # Higher = finer resolution, but slightly wider HUD.
    # Recommended: 30
    bar-cells: 30

  # Debug toggles (logs to console). Keep these off unless troubleshooting.
  debug:
    teleport: false
    checkpoints: false
    # Logs dashboard follow/rotation diagnostics (rate-limited, once per second per racer).
    dashboard: false
    # Logs per-second drift/rotation deltas during the 10s start countdown freeze.
    countdown-freeze: false
    # Logs chosen boat type and spawned entity type.
    boat-selection: false

  countdown:
    barrier:
      # Place temporary barrier blocks in front of boats during the start countdown.
      enabled: true

  # After everyone finishes, keep the results visible for this many seconds, then cleanup.
  post-finish-cleanup-seconds: 15
  # Time penalty applied if a racer moves forward before the countdown ends (in seconds)
  false-start-penalty-seconds: 3.0
  # Enable/disable false start penalty during the light countdown
  enable-false-start-penalty: true
  # Delay between all 5 lights lit and 'lights out' (seconds); allows a brief suspense before GO
  lights-out-delay-seconds: 1.0
  # Optional random jitter added on top of the delay (random between 0 and this value)
  lights-out-jitter-seconds: 0.0

  # Scoreboard & ActionBar customization
  ui:
    # How often to update scoreboard + actionbar (in server ticks). Lower = faster but more CPU.
    # Recommended: 5 (0.25s) or 10 (0.5s)
    update-ticks: 5
    # Customizable scoreboard templates (MiniMessage + PlaceholderAPI + internal %placeholders%).
    # IMPORTANT: internal placeholders use the %name% format.
    #
    # Common player placeholders (most contexts):
    #   %racer_name% %racer_display% %racer_color% %icon% %number%
    # Lobby-only: %completed% %wins% %time_raced%
    #
    # Waiting: %track% %laps% %joined% %max% %countdown%
    # Waiting (th√¥ng tin ƒë∆∞·ªùng b·ªï sung):
    #   %track_world% %track_length_display%
    #   %track_ready% %track_ready_display% %track_missing%
    #   %track_starts% %track_lights% %track_checkpoints% %track_centerline_nodes%
    #   %track_has_finish% %track_has_finish_display%
    #   %track_has_bounds% %track_has_bounds_display%
    #   %track_has_waiting_spawn% %track_has_waiting_spawn_display%
    #   %track_author_name% %track_author_display%
    #   %track_icon_material%
    # Racing: %track% %timer% %lap_current% %lap_total% %position% %joined% %lap_progress% %track_progress% %checkpoint_passed% %checkpoint_total%
    # Racing nav/turn: %nav_arrow% %nav_arrow_icon% %nav_arrow_color% %nav_arrow_color_close% %nav_angle% %nav_distance%
    #   %next_turn% %next_turn_icon% %next_turn_label% %next_turn_color% %next_turn_color_close% %next_turn_angle%
    # Racing neighbor (ahead/behind) placeholders:
    #   %ahead_position% %ahead_position_tag% %ahead_racer_name% %ahead_racer_display%
    #   %ahead_speed_display% %ahead_speed% %ahead_speed_unit% %ahead_speed_color% %ahead_speed_color_close%
    #   %ahead_distance% %ahead_distance_unit%
    #
    #   %behind_position% %behind_position_tag% %behind_racer_name% %behind_racer_display%
    #   %behind_speed_display% %behind_speed% %behind_speed_unit% %behind_speed_color% %behind_speed_color_close%
    #   %behind_distance% %behind_distance_unit%
    #
    # L∆∞u √Ω: %*_speed_color% tr·∫£ v·ªÅ tag MiniMessage ƒë·∫ßy ƒë·ªß (v√≠ d·ª•: "<red>").
    # Completed / Ended (header + title) placeholders (the VIEWER'S own result):
    #   %finish_pos% %finish_pos_tag% %finish_time%
    #   %avg_speed_display% %avg_speed% %avg_speed_bps% %avg_speed_kmh% %avg_speed_bph%
    #   %speed_unit% %speed_color% %speed_color_close% %speed_color_name%
    #
    # Completed (finished racers list items): %finish_pos% %finish_pos_tag% %finish_time% (plus %racer_display%)
    # Ended (everyone finished list items): also provides %delta_time%
    # Special control marker:
    #   - If a rendered line contains "[skip]" it will not be sent to the scoreboard.
    templates:
      lobby:
        title: "<gold>BoatRacing"
        lines:
          - "<yellow>H·ªì s∆° c·ªßa b·∫°n"
          - "<gray>T√™n: %racer_display%"
          - "<gray>M√†u: <white>%racer_color%"
          - "<gray>Bi·ªÉu t∆∞·ª£ng: <white>%icon%"
          - "<gray>S·ªë ƒëua: <white>%number%"
          - "<yellow>Th√†nh t√≠ch"
          - "<gray>Ho√†n th√†nh: <white>%completed%"
          - "<gray>Chi·∫øn th·∫Øng: <white>%wins%"
          - "<gray>Th·ªùi gian ƒë√£ ƒëua: <white>%time_raced%"

      # Event lobby (ng∆∞·ªùi ch∆°i ƒë√£ tham gia s·ª± ki·ªán nh∆∞ng hi·ªán kh√¥ng ·ªü trong cu·ªôc ƒëua)
      # Templates: header/footer/ranking_item (multi-line) + title
      # Event placeholders:
      #   %event_id% %event_title% %event_state% %event_state_display%
      #   %event_countdown_label% %event_countdown% %event_countdown_display%
      #   %event_points% %event_position% %event_position_tag%
      #   %event_participants% %event_track_total% %event_track_index% %event_track_name%
      # Ranking item placeholders:
      #   %rank_position% %rank_position_tag% %rank_points% %rank_racer_name% %rank_racer_display%
      event_lobby:
        title: "<gold>S·ª± ki·ªán"
        header:
          - "<yellow>%event_title%"
          - "<gray>Tr·∫°ng th√°i: <white>%event_state_display%"
          - "<gray>‚åõ %event_countdown_label%: <white>%event_countdown%"
          - "<gray>B·∫°n: %racer_display% <gray>‚óè</gray> %event_position_tag% <gray>‚óè</gray> <white>%event_points%</white> <gray>ƒëi·ªÉm</gray>"
          - "<gray>T·ªïng tay ƒëua: <white>%event_participants%"
          - ""
          - "<yellow>B·∫£ng ƒëi·ªÉm"
        ranking_item:
          - "%rank_position_tag% %rank_racer_display%"
          - "<gray>  ƒëi·ªÉm: <white>%rank_points%"
        footer:
          - ""
          - "<gray>‚Ñπ Track pool: <white>%event_track_total%"
      waiting:
        title: "<gold>ƒêang ch·ªù"
        lines:
          - "<yellow>Th√¥ng tin ƒë∆∞·ªùng"
          - "<gray>ƒê∆∞·ªùng: <white>%track%"
          - "<gray>V√≤ng: <white>%laps%"
          - "<gray>Ng∆∞·ªùi ch∆°i: <white>%joined%/%max%"
          - "<gray>ƒêi·ªÉm ki·ªÉm tra: <white>%checkpoint_total%"
          - "<gray>‚åö K·ª∑ l·ª•c: <white>%track_record_time%</white> <gray>b·ªüi</gray> %track_record_holder%"
          - "<gray>‚åö K·ª∑ l·ª•c c√° nh√¢n: <white>%personal_record_time%"
          - "<yellow>Tay ƒëua"
          - "<gray>T√™n: %racer_display%"
          - "<gray>M√†u: <white>%racer_color%"
          - "<gray>Bi·ªÉu t∆∞·ª£ng: <white>%icon%"
          - "<gray>S·ªë ƒëua: <white>%number%"
          - "<gray>B·∫Øt ƒë·∫ßu: <white>%countdown%"

      # Countdown (ƒë√£ v√†o v·ªã tr√≠ xu·∫•t ph√°t, ƒëang ƒë·∫øm ng∆∞·ª£c ƒë√®n)
      countdown:
        title: "<gold>Chu·∫©n b·ªã"
        lines:
          - "<yellow>V√†o v·ªã tr√≠ xu·∫•t ph√°t"
          - "<gray>ƒê∆∞·ªùng: <white>%track%"
          - "<gray>V√≤ng: <white>%laps%"
          - "<gray>Ng∆∞·ªùi ch∆°i: <white>%joined%/%max%"
          - "<gray>ƒêi·ªÉm ki·ªÉm tra: <white>%checkpoint_total%"
          - ""
          - "<yellow>ƒê·∫øm ng∆∞·ª£c"
          - "<gray>B·∫Øt ƒë·∫ßu trong: <white>%countdown%"
      racing:
        title: "<gold>ƒêang ƒëua"
        lines:
          - "<gray>ƒê∆∞·ªùng: <white>%track%"
          - "<gray>Th·ªùi gian: <white>%timer%"
          - "<gray>V√≤ng: <white>%lap_current%/%lap_total%"
          - "<gray>Checkpoint: <white>%checkpoint_passed%/%checkpoint_total%"
          - "<gray>V·ªã tr√≠: <white>%position%/%joined%"
          - "<gray>Ti·∫øn ƒë·ªô v√≤ng: <white>%lap_progress%%"
          - "<gray>Ti·∫øn ƒë·ªô t·ªïng: <white>%track_progress%%"
      completed:
        title: "<gold>K·∫øt qu·∫£"
        # Header/footer apply to everyone when showing the completed board.
        header:
          - "<gray>ƒê∆∞·ªùng: <white>%track%</white> <gray>‚óè</gray> <white>%track_length_display%"
          - "<gray>B·∫°n:</gray> %racer_display% <gray>‚óè</gray> %finish_pos_tag% <gray>‚óè</gray> <white>%finish_time%</white> <gray>‚óè</gray> %avg_speed_display%"
        footer: []

        # Multi-line blocks for racers that have finished.
        finished-header:
          - "<yellow>V·ªÅ ƒë√≠ch"
        finished-item:
          - "%finish_pos_tag% %racer_display%"
          - "<gray>  th·ªùi gian: <white>%finish_time%"
        finished-max-lines: 8

        # Multi-line blocks for racers that are still racing.
        unfinished-header:
          - "<yellow>ƒêang ƒëua"
        unfinished-item:
          - "%position_tag% %racer_display%"
          - "<gray>  ti·∫øn ƒë·ªô v√≤ng: <white>%lap_progress%%"
          - "<gray>  ti·∫øn ƒë·ªô t·ªïng: <white>%track_progress%%"
        unfinished-max-lines: 6
      # Race ended (everyone finished): show full ordered results.
      # Placeholders:
      #   %finish_pos% %racer_name% %finish_time% %delta_time%
      ended:
        title: "<gold>K·∫øt qu·∫£"
        header:
          - "<gray>ƒê∆∞·ªùng: <white>%track%</white> <gray>‚óè</gray> <white>%track_length_display%"
          - "<yellow>K·∫øt qu·∫£"
          - "<gray>B·∫°n:</gray> %racer_display% <gray>‚óè</gray> %finish_pos_tag% <gray>‚óè</gray> <white>%finish_time%</white> <gray>‚óè</gray> %avg_speed_display%"
        # #1 line (shows absolute time)
        winner_line: "%finish_pos_tag% %racer_display% <gray>‚óè</gray> <white>%finish_time%"
        # Everyone else (shows +delta from #1)
        delta_line: "%finish_pos_tag% %racer_display% <gray>‚óè</gray> <white>+%delta_time%"
        # Optional footer lines appended to the ended board.
        footer: []
      # ActionBar templates shown only while waiting and racing; supports MiniMessage and PlaceholderAPI
      actionbar:
        enabled: true
        # Matchmaking placeholders: %phase% %queued% %min% %remain% %waited% %status%
        #  - %phase% is a pre-colored label (v√≠ d·ª•: "<yellow>üîé ƒêang t√¨m ng∆∞·ªùi ch∆°i</yellow>")
        #  - %status% is "ready" ho·∫∑c "searching" (d√πng cho PlaceholderAPI n·∫øu c·∫ßn)
        matchmaking: "%phase% <white>%queued%</white>/<white>%min%</white> <gray>t·ªëi thi·ªÉu</gray> <gold>‚åõ</gold> <white>%remain%</white>"
        # Waiting placeholders: %countdown% %joined% %max%
        waiting: "<yellow>B·∫Øt ƒë·∫ßu trong <white>%countdown%</white> ‚óè <gray>%joined%/%max%</gray>"
        # Racing placeholders: %position% %racer_display% %lap_current% %lap_total% %lap_progress% %track_progress% %speed_display% %speed% %speed_unit% %speed_bps% %speed_kmh% %speed_bph% %next_checkpoint% %checkpoint_passed% %checkpoint_total% %speed_color%
        # Navigation placeholders: %nav_arrow% %nav_arrow_icon% %nav_arrow_color% %nav_arrow_color_close% %nav_angle% %nav_distance%
        # Turn placeholders: %next_turn% %next_turn_icon% %next_turn_label% %next_turn_color% %next_turn_color_close% %next_turn_angle%
        # - %speed_display% is a pre-colored and unit-aware string (recommended).
        # - %speed_color% returns the full MiniMessage tag (e.g. "<red>"), not just a tag name.
        racing: "%position_tag% %racer_display% <white>%lap_current%/%lap_total%</white> <white>%checkpoint_passed%/%checkpoint_total%</white> %nav_arrow% %next_turn% <yellow>%lap_progress%%</yellow> %speed_display%"
        # Completed placeholders: %finish_pos% %racer_display% %finish_time% %avg_speed_display% %avg_speed% %speed_unit% %speed_color%
        completed: "%finish_pos_tag% %racer_display% <gray>‚óè</gray> <white>%finish_time%</white> <gray>‚óè</gray> %avg_speed_display%"

# Speed unit and color thresholds
scoreboard:
  speed:
    unit: kmh        # kmh | bps | bph
    # Preferred thresholds for chosen unit (integers).
    yellow_kmh: 5    # below this is red; between yellow and green is yellow
    green_kmh: 20    # at or above this is green
    # Thresholds for bps unit (blocks per second)
    yellow_bps: 2
    green_bps: 6
    # Thresholds for bph unit (blocks per hour)
    yellow_bph: 5000
    green_bph: 20000
    # Colors for tiers (MiniMessage color names). Global defaults + per-unit overrides.
    colors:
      low: red
      mid: yellow
      high: green
      bps:
        low: red
        mid: yellow
        high: green
      kmh:
        low: red
        mid: yellow
        high: green
      bph:
        low: red
        mid: yellow
        high: green

  # Registration announce message template
  # Placeholders: {track} = track name, {laps} = total laps, {cmd} = suggested join command
  registration-announce: "&eCu·ªôc ƒëua m·ªõi t·∫°i &f{track}&e (&f{laps}&e v√≤ng). &7Tham gia b·∫±ng &f{cmd}"

# MapEngine integration (optional). Requires the MapEngine plugin installed.
mapengine:
  lobby-board:
    # Enable the lobby information board.
    enabled: false

    # If there are too many tracks to fit, auto-cycle pages like an airport board.
    # Unit: seconds per page.
    page-seconds: 6

    # Font file for the lobby board renderer (TTF/OTF).
    # - M·∫∑c ƒë·ªãnh: d√πng font h·ªá th·ªëng (monospace).
    # - B·∫°n c√≥ th·ªÉ cung c·∫•p font Minecraft d·∫°ng .ttf/.otf t·∫°i:
    #   ‚óè plugins/BoatRacing/fonts/minecraft.ttf (ho·∫∑c .otf)
    #   ‚óè ho·∫∑c ƒë·∫∑t ƒë∆∞·ªùng d·∫´n t·∫°i ƒë√¢y (tuy·ªát ƒë·ªëi ho·∫∑c t∆∞∆°ng ƒë·ªëi theo th∆∞ m·ª•c plugin).
    # L∆∞u √Ω: H√£y ƒë·∫£m b·∫£o b·∫°n c√≥ quy·ªÅn s·ª≠ d·ª•ng font.
    font-file: ""

    # Enable debug logs for the lobby board (prints to console, rate-limited).
    debug: false

    # Show the board only to lobby players within this radius (in chunks).
    # Default: 12 chunks.
    visible-radius-chunks: 12

    # How often to redraw the board (in server ticks). Default: 20 (1s)
    update-ticks: 20

    # MapEngine pipeline options
    # - buffering: enable internal buffering for smoother updates
    # - bundling: batch multiple updates into one send; disable to reduce "blank"/partial frames on some setups
    pipeline:
      buffering: true
      bundling: false

    # Placement is written by the /boatracing board set command.
    placement: {}

  # Event board (MapEngine) (optional)
  # Shows event scoreboard only to participants near the board.
  event-board:
    enabled: false

    # Show the board only to nearby participants within this radius (in chunks).
    visible-radius-chunks: 12

    # How often to redraw the board (in server ticks). Default: 20 (1s)
    update-ticks: 20

    # Optional custom font file for MapEngine rendering.
    # Same rules as lobby-board.font-file.
    font-file: ""

    # Font sizes (fallback is Monospaced).
    font:
      # Global scale applied to all font sizes on the event board.
      scale: 1.25
      title-size: 18
      body-size: 14

    debug: false

    pipeline:
      buffering: true
      bundling: false

    # Placement is written manually by config for now.
    # You can copy the structure from mapengine.lobby-board.placement.
    placement: {}

  # Opening titles board (MapEngine) (optional)
  # Used during event opening titles to display server favicon and per-racer cards.
  opening-titles:
    enabled: false

    # Stage spawn for featured racer (used by Event opening titles)
    stage:
      world: world
      x: 0
      y: 100
      z: 0
      yaw: 180
      pitch: 0

    # Camera viewing position for the audience (fixed)
    camera:
      world: world
      x: 0
      y: 102
      z: -8
      yaw: 0
      pitch: 10

    # How often to redraw the board (in server ticks). For ~20fps, set 1.
    update-ticks: 1

    # Optional custom font file for MapEngine rendering.
    # Same rules as lobby-board.font-file.
    font-file: ""

    # Font sizes (fallback is Monospaced).
    font:
      title-size: 18
      body-size: 14

    debug: false

    pipeline:
      buffering: true
      bundling: false

    # Placement is written manually by config for now.
    # You can copy the structure from mapengine.lobby-board.placement.
    board:
      placement: {}

# Discord webhook (t√πy ch·ªçn): g·ª≠i to√†n b·ªô tin nh·∫Øn chat trong game sang Discord.
# Webhook n√†y c≈©ng ƒë∆∞·ª£c d√πng cho th√¥ng b√°o k·ª∑ l·ª•c v√† ti·∫øn tr√¨nh s·ª± ki·ªán.
# L∆∞u √Ω:
# - T√≠nh nƒÉng n√†y ch·ªâ g·ª≠i ra Discord, KH√îNG ·∫£nh h∆∞·ªüng chat trong game.
# - T·∫•t c·∫£ MiniMessage tags (v√≠ d·ª•: <red>) v√† m√£ m√†u (&a, ¬ßa, hex) s·∫Ω b·ªã lo·∫°i b·ªè tr∆∞·ªõc khi g·ª≠i.
# - H·ªó tr·ª£ PlaceholderAPI (n·∫øu server c√≥ c√†i), c√πng v·ªõi c√°c placeholder n·ªôi b·ªô b√™n d∆∞·ªõi.
discord:
  chat-webhook:
    # B·∫≠t/t·∫Øt module
    enabled: false

    # URL webhook Discord (t·∫°o trong k√™nh Discord -> Integrations -> Webhooks)
    # V√≠ d·ª•: "https://discord.com/api/webhooks/..."
    url: ""

    # Template t√™n hi·ªÉn th·ªã c·ªßa bot/webhook (h·ªó tr·ª£ placeholder)
    # Placeholder n·ªôi b·ªô: %player_name% %player_uuid% %world% %message%
    username: "%player_name%"

    # URL avatar (h·ªó tr·ª£ placeholder). ƒê·ªÉ tr·ªëng ƒë·ªÉ d√πng avatar m·∫∑c ƒë·ªãnh c·ªßa webhook.
    avatar-url: ""

    # N·ªôi dung g·ª≠i l√™n Discord (h·ªó tr·ª£ placeholder)
    # Placeholder n·ªôi b·ªô: %player_name% %player_uuid% %world% %message%
    message: "[%world%] %player_name%: %message%"

    # Timeout HTTP khi g·ª≠i (ms)
    timeout-ms: 5000

    # Discord gi·ªõi h·∫°n content t·ªëi ƒëa 2000 k√Ω t·ª±; b·∫≠t ƒë·ªÉ t·ª± c·∫Øt.
    trim-to-2000: true

    # H√†ng ƒë·ª£i g·ª≠i webhook (gi√∫p ·ªïn ƒë·ªãnh v√† gi·ªØ th·ª© t·ª± khi chat nhi·ªÅu)
    # N·∫øu ƒë·∫ßy, plugin s·∫Ω b·ªè b·ªõt tin nh·∫Øn ƒë·ªÉ tr√°nh lag.
    max-queue-size: 200

    # Th·ª≠ g·ª≠i l·∫°i khi l·ªói m·∫°ng / rate-limit (Discord 429)
    max-retries: 3
    retry-backoff-ms: 750

    # B·∫≠t log debug (s·∫Ω in th√™m th√¥ng tin khi g·ª≠i / l·ªói)
    debug: false
